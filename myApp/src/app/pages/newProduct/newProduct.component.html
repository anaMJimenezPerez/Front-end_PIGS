<body>
    <div class="container mt-5">
        <form #productForm="ngForm" (ngSubmit)="onSubmit(productForm)" class="productForm">
            <h1>Create a new product</h1>
            <!-- Name product -->
            <div class="form-group">
                <label for="productName">Name:</label>
                <input type="text" class="form-control" id="productName" name="productName" required
                    [(ngModel)]="product.name" #productName="ngModel">
                <div *ngIf="productForm.submitted && !productName.valid" class="error-message">
                    <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                    Product name is required
                </div>
            </div>

            <!-- Photo -->
            <div class="form-group">
                <label for="photos">Upload Photos:</label>
                <input type="file" class="form-control" id="photos" name="photos" multiple accept="image/*"
                    (change)="previewPhotos($event)">
            </div>


            <!-- Container for image previews -->
            <div class="preview-container">
                <div *ngFor="let photo of photos; let index = index" class="preview-item">
                    <img [src]="photo.src" [alt]="'Image ' + (index + 1)">
                    <button class="delete-photo" (click)="removePhoto(index)">Delete</button>
                </div>
            </div>

            <!-- Description -->
            <div class="form-group">
                <label for="description">Description:</label>
                <textarea class="form-control" id="description" name="description"
                [(ngModel)]="product.description" #description="ngModel"></textarea>
            </div>

            <!-- Price -->
            <div class="form-group">
                <label for="price">Price:</label>
                <input type="number" class="form-control" id="price" name="price" min="0.01" step="0.1" required
                    [(ngModel)]="product.price" #price="ngModel">
                <div *ngIf="productForm.submitted && (!price.valid || price.value <= 0)"  class="error-message">
                    <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                    Price must be greater than 0 
                </div>
            </div>

            <!-- Stock -->
            <div class="form-group">
                <label for="quantity">Stock:</label>
                <input type="number" class="form-control" id="quantity" name="quantity" min="1" required
                    [(ngModel)]="product.quantity" #quantity="ngModel">
                <div *ngIf="productForm.submitted && (!quantity.valid || quantity.value <= 0)" class="error-message">
                    <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                    Stock must be greater than 0 
                </div>
            </div>


            <!-- Date -->
            <div class="form-group">
                <label for="createdDate">Creation Date:</label>
                <input type="date" class="form-control" id="createdDate" name="createdDate" readonly [(ngModel)]="product.date">
            </div>

            <!-- Category -->
            <div class="form-group">
                <label for="category">Category:</label>
                <select class="form-control" id="category" name="category" required
                    (change)="showCategoryFields($event)">
                    <option value="clothing">Clothing</option>
                    <option value="jewelry">Jewelry</option>
                    <option value="keychain">Keychain</option>
                    <option value="painting">Painting</option>
                    <option value="ceramic">Ceramic</option>
                    <option value="plush">Plush</option>
                </select>
            </div>

            <!-- Clothing Fields -->
            <fieldset id="clothingFields" class="form-group d-none">
                <div class="form-group">
                    <label for="clothingType">Type:</label>
                    <select class="form-control" id="clothingType" name="clothingType">
                        <option value="trousers">Trousers</option>
                        <option value="shirt">Shirt</option>
                    </select>
                </div>

                <div id="clothingSizes" class="form-group">
                    <label>Size:</label>
                    <ng-container [ngTemplateOutlet]="sizeTemplate"></ng-container>
                    <div *ngIf="showSizeError" class="error-message">
                        <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                        At least one size must be selected for clothing 
                    </div>
                </div>

                <div id="clothingColors" class="form-group">
                    <label>Color:</label>
                    <ng-container [ngTemplateOutlet]="checkboxTemplate"></ng-container>
                    <div *ngIf="showColorError" class="error-message">
                        <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                        At least one color must be selected for clothing 
                    </div>
                </div>
            </fieldset>

            <!-- Jewelry Fields -->
            <fieldset id="jewelryFields" class="form-group d-none">
                <div class="form-group">
                    <label for="jewelryType">Type:</label>
                    <select class="form-control" id="jewelryType" name="jewelryType">
                        <option value="necklace">Necklace</option>
                        <option value="bracelet">Bracelet</option>
                        <option value="ring">Ring</option>
                        <option value="earrings">Earrings</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Color:</label>
                    <ng-container [ngTemplateOutlet]="checkboxTemplate"></ng-container>
                    <div *ngIf="showColorError" class="error-message">
                        <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                        At least one color must be selected for jewelry 
                    </div>
                </div>
            </fieldset>

            <!-- Keychain Fields -->
            <fieldset id="keychainFields" class="form-group d-none">
                <div class="form-group">
                    <label for="keychainSize">Size:</label>
                    <ng-container [ngTemplateOutlet]="sizeTemplate"></ng-container>
                    <div *ngIf="showColorError" class="error-message">
                        <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                        At least one size must be selected for keychain 
                    </div>
                </div>
                <div class="form-group">
                    <label for="keychainColor">Color:</label>
                    <ng-container [ngTemplateOutlet]="checkboxTemplate"></ng-container>
                    <div *ngIf="showColorError" class="error-message">
                        <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                        At least one color must be selected for keychain 
                    </div>
                </div>
            </fieldset>

            <!-- Painting Fields -->
            <fieldset id="paintingFields" class="form-group d-none">
                <div class="form-group">
                    <label for="paintingSize">Size:</label>
                    <ng-container [ngTemplateOutlet]="sizeTemplate"></ng-container>
                    <div *ngIf="showColorError" class="error-message">
                        <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                        At least one size must be selected for painting
                    </div>
                </div>
            </fieldset>

            <!-- Ceramic Fields -->
            <fieldset id="ceramicFields" class="form-group d-none">
                <div class="form-group">
                    <label for="ceramicType">Type:</label>
                    <select class="form-control" id="ceramicType" name="ceramicType">
                        <option value="glass">Glass</option>
                        <option value="plate">Plate</option>
                        <option value="vase">Vase</option>
                        <option value="figure">Figure</option>
                    </select>
                </div>
            </fieldset>

            <!-- Plush Fields -->
            <fieldset id="plushFields" class="form-group d-none">
                <div class="form-group">
                    <label for="plushSize">Size:</label>
                    <ng-container [ngTemplateOutlet]="sizeTemplate"></ng-container>
                    <div *ngIf="showColorError" class="error-message">
                        <img src="assets/images/newProduct/alert_icon.png" alt="Error" class="error-icon">
                        At least one size must be selected for plush 
                    </div>
                </div>
            </fieldset>

            <div class="button-container">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>
    </div>
</body>


<!-- Template checkbox colors -->
<ng-template #checkboxTemplate>
    <div class="checkbox-pairs">
        <div>
            <input type="checkbox" id="colorWhite" name="clothingColor" value="white">
            <label for="colorWhite">White</label>
        </div>
        <div>
            <input type="checkbox" id="colorRed" name="clothingColor" value="red">
            <label for="colorRed">Red</label>
        </div>
        <div>
            <input type="checkbox" id="colorOrange" name="clothingColor" value="orange">
            <label for="colorOrange">Orange</label>
        </div>
        <div>
            <input type="checkbox" id="colorYellow" name="clothingColor" value="yellow">
            <label for="colorYellow">Yellow</label>
        </div>
        <div>
            <input type="checkbox" id="colorGreen" name="clothingColor" value="green">
            <label for="colorGreen">Green</label>
        </div>
        <div>
            <input type="checkbox" id="colorBlue" name="clothingColor" value="blue">
            <label for="colorBlue">Blue</label>
        </div>
        <div>
            <input type="checkbox" id="colorViolet" name="clothingColor" value="violet">
            <label for="colorViolet">Violet</label>
        </div>
        <div>
            <input type="checkbox" id="colorBlack" name="clothingColor" value="black">
            <label for="colorBlack">Black</label>
        </div>
    </div>
</ng-template>


<!-- Template checkbox size -->
<ng-template #sizeTemplate>
    <div class="checkbox-pairs">
        <div>
            <input type="checkbox" id="sizeExtraSmall" name="clothingSize" value="extrasmall">
            <label for="sizeExtraSmall">Extra small</label>
        </div>
        <div>
            <input type="checkbox" id="sizeSmall" name="clothingSize" value="small">
            <label for="sizeSmall">Small</label>
        </div>
        <div>
            <input type="checkbox" id="sizeMedium" name="clothingSize" value="medium">
            <label for="sizeMedium">Medium</label>
        </div>
        <div>
            <input type="checkbox" id="sizeLarge" name="clothingSize" value="large">
            <label for="sizeLarge">Large</label>
        </div>
        <div>
            <input type="checkbox" id="sizeExtraLarge" name="clothingSize" value="extralarge">
            <label for="sizeExtraLarge">Extra large</label>
        </div>
    </div>
</ng-template>